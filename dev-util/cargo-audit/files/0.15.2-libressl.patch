From: orbea <orbea@riseup.net>
Date: Fri, 8 Jul 2022 20:33:56 -0700
Subject: [PATCH] Support LibreSSL 3.4.x + 3.5.x

diff --git a/libssh2-sys-0.2.21/build.rs b/libssh2-sys-0.2.21/build.rs
index 0ec2073..45450a6 100644
--- a/libssh2-sys-0.2.21/build.rs
+++ b/libssh2-sys-0.2.21/build.rs
@@ -111,6 +111,7 @@ fn main() {
         cfg.define("HAVE_EVP_AES_128_CTR", None);
         cfg.define("HAVE_POLL", None);
         cfg.define("HAVE_GETTIMEOFDAY", None);
+        cfg.define("HAVE_OPAQUE_STRUCTS", None);
 
         cfg.file("libssh2/src/openssl.c");
 
diff --git a/openssl-sys-0.9.65/build/main.rs b/openssl-sys-0.9.65/build/main.rs
index 88752d9..32e23dc 100644
--- a/openssl-sys-0.9.65/build/main.rs
+++ b/openssl-sys-0.9.65/build/main.rs
@@ -237,6 +237,8 @@ See rust-openssl README for more information:
             (3, 3, 0) => ('3', '3', '0'),
             (3, 3, 1) => ('3', '3', '1'),
             (3, 3, _) => ('3', '3', 'x'),
+            (3, 4, _) => ('3', '4', 'x'),
+            (3, 5, _) => ('3', '5', 'x'),
             _ => version_error(),
         };
 
-- 
2.35.1

