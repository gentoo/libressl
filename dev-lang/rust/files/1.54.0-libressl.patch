From 137d2bcff8f7eca2207fe5899ba2bd0c83833dca Mon Sep 17 00:00:00 2001
From: Stefan Strogin <steils@gentoo.org>
Date: Fri, 20 Aug 2021 12:23:13 -0700
Subject: [PATCH] Support LibreSSL 3.3.x

Signed-off-by: orbea <orbea@riseup.net>
---
 vendor/openssl-sys/.cargo-checksum.json | 2 +-
 vendor/openssl-sys/build/main.rs        | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/vendor/openssl-sys/.cargo-checksum.json b/vendor/openssl-sys/.cargo-checksum.json
index 4e9f9c71b..003be66d4 100644
--- a/vendor/openssl-sys/.cargo-checksum.json
+++ b/vendor/openssl-sys/.cargo-checksum.json
@@ -1 +1 @@
-{"files":{"CHANGELOG.md":"3c38e78f95e359924f839c6f3738c75b91149af81c23688dfaf37618a3332755","Cargo.toml":"d25f5ed8a445b5efc5bb81d51d7409e6b7e0abb90ceffe623dfa0da00c3f4ebb","LICENSE-MIT":"378f5840b258e2779c39418f3f2d7b2ba96f1c7917dd6be0713f88305dbda397","README.md":"18071782a20c51379733d7c2041c6755a11326d0153d8c7c3073875d7870da42","build/cfgs.rs":"9f92d008cf0db1cc2728f2b67c24a719840a4c8645d11dc560eadd8e9b0adeac","build/expando.c":"14d2de522d6ef7214c3f1ca73b9231229420b8ba95bdcf01cac93bf775aed15e","build/find_normal.rs":"1c5f996f44e77311d7e4c0e6bdfa212de427f569c19c790c119b88d472977700","build/find_vendored.rs":"7bf0e59c5646d72ee5a4392ad970fdf5c20288ddaf54dd86a8caff49583b38f5","build/main.rs":"c7485a16dd676de00d9ef42e3e41c5217cc6d5f5783f492a61b9c118e9f3bf18","src/aes.rs":"822bf666db351fe6ef9607c918081d6ad378fc1cedb05290bb746f86980c6088","src/asn1.rs":"801c254afc76b0c29b756bd86a149361609f82ec33c1f1fad39a512fbe4e87ee","src/bio.rs":"3aac4e38ccf8d832b4156908cd3f1ff9c56f84c05d2f07ed7a3e3fccabe965e9","src/bn.rs":"c71b9c79f704a94a889d27bf75e7e5b1f9f10b0df0aeb485aef509cf05d7467f","src/cms.rs":"f21a403fea95e7b7efe0539a429831cfa51c8818adb79c7ebf73ae2a6f2dc87e","src/conf.rs":"511e008c18039f54d856d70b80009426fc7f4ce34fe4304e2c58ebf465031de0","src/crypto.rs":"a1279719ade9704be3d9af55ff679abbe918d525f332ca15810146d45e9080cf","src/dh.rs":"280fd508756b8013368a4233465f681a1339ad4e415569c14762e5dad0441cbe","src/dsa.rs":"ae79baf231681900ea76304285b3ffacf5298c90b8c04d371269cf4adbb5b9fa","src/dtls1.rs":"45e1dbf94a42d587fd948d553dc30187aa6aa2b5b82d554cf725ff36df768aa0","src/ec.rs":"c215a564373e8de1da63b698fbafc187d738fe90b77f998713a91180e178e350","src/err.rs":"3edf1379b3277df32e047a52553d243d4a4001111a277cf4b12f7297f2fe2bf0","src/evp.rs":"e82deaaf6d76c3dc52fd574fa131ac4f64dc6c5f173cf38dfd0a24b2f878c5be","src/hmac.rs":"fa3976d94a1383f300bdec228270afb8b47c97bb019d727c7d59ba783be3c42e","src/lib.rs":"57291110117331f5d6733da1421267e47cf891e0e0411b0720a04fdbc0686700","src/macros.rs":"7ed99c00c53ee12ea92634d4ace0af84845ebf98819869746e7896c8eaff23db","src/obj_mac.rs":"42019b142e523d7695d8c14ee7f72fa4b5702c07dee98fa12e70ab7dfcc95459","src/object.rs":"210d91fc81414da4cd3afa0127cabffef1640fa85e65635bc489e0f721ee929f","src/ocsp.rs":"154e416aa14df8d5aa962f3352ca72bab00716f0834413c78dfa663e0880e9dd","src/ossl_typ.rs":"4379b8327a1efbae1c784ad576c98ac7708bf62cab1c373845d9ca948b5e401b","src/pem.rs":"ba80937125618cd0e7073d69be6aff3b619ede74e227a158cb0a68af27f69640","src/pkcs12.rs":"f1a3f32f128fa8ce94391c1957a0e535387cebc0e25d21743888b172518dd636","src/pkcs7.rs":"0c5a0f85323a1e5a4d7edcc433166de8614b44f545758d926cf95e9626d4af2b","src/rand.rs":"469601b4fbb56d4dbf5cf5d7bb8483e3bde411edea18601e7d1ed6ef27180fd3","src/rsa.rs":"aa984781f19d3e88527bec9db5338b19051313b01589018c5bb86923f058c6c6","src/safestack.rs":"6c39e28565d34efad707d77561d4caa99e3f028fcac3a2ef6fd403a78de1190c","src/sha.rs":"1a6b028a63654d2419417a9a8af790cd22409a4643682a0686ecdb9441264eba","src/srtp.rs":"1c4dee9e6c139cc70416207786e385f199321624fb9fbf3cbf39a8160c0c405d","src/ssl.rs":"5970b21a47668f7efb8130f22110d9ab65c571a45681c02d8ab596b7068db963","src/ssl3.rs":"9336c816e00847d552dea22587d4ac72ff3cbd469fa5ff750423a19ea11e68eb","src/stack.rs":"1a509907283e5a2bf88cf193ce607f49ce7d2d95547c2ce2abc0fd4567aad334","src/tls1.rs":"60ca3dea1bbfda645bde563b4a878dac129c3f760e3ad572381000fc7a8ef522","src/x509.rs":"7ffbf8687f650dd9678eab61871913579539f78ebf69f005f07f7a40017b26cb","src/x509_vfy.rs":"a5fc69e3ef3565c8d9196768c0b84bd876edfb019688dc4487dbb88f6a89293d","src/x509v3.rs":"520253195097d134e553c6378c1db2510eae6ccfcab6f6fb08919697bc0f023b"},"package":"313752393519e876837e09e1fa183ddef0be7735868dced3196f4472d536277f"}
\ No newline at end of file
+{"files":{"CHANGELOG.md":"3c38e78f95e359924f839c6f3738c75b91149af81c23688dfaf37618a3332755","Cargo.toml":"d25f5ed8a445b5efc5bb81d51d7409e6b7e0abb90ceffe623dfa0da00c3f4ebb","LICENSE-MIT":"378f5840b258e2779c39418f3f2d7b2ba96f1c7917dd6be0713f88305dbda397","README.md":"18071782a20c51379733d7c2041c6755a11326d0153d8c7c3073875d7870da42","build/cfgs.rs":"9f92d008cf0db1cc2728f2b67c24a719840a4c8645d11dc560eadd8e9b0adeac","build/expando.c":"14d2de522d6ef7214c3f1ca73b9231229420b8ba95bdcf01cac93bf775aed15e","build/find_normal.rs":"1c5f996f44e77311d7e4c0e6bdfa212de427f569c19c790c119b88d472977700","build/find_vendored.rs":"7bf0e59c5646d72ee5a4392ad970fdf5c20288ddaf54dd86a8caff49583b38f5","build/main.rs":"93ac710e06c9db872b47de99a61bc4aa058ac99e3d734a27a77332a47cca2f75","src/aes.rs":"822bf666db351fe6ef9607c918081d6ad378fc1cedb05290bb746f86980c6088","src/asn1.rs":"801c254afc76b0c29b756bd86a149361609f82ec33c1f1fad39a512fbe4e87ee","src/bio.rs":"3aac4e38ccf8d832b4156908cd3f1ff9c56f84c05d2f07ed7a3e3fccabe965e9","src/bn.rs":"c71b9c79f704a94a889d27bf75e7e5b1f9f10b0df0aeb485aef509cf05d7467f","src/cms.rs":"f21a403fea95e7b7efe0539a429831cfa51c8818adb79c7ebf73ae2a6f2dc87e","src/conf.rs":"511e008c18039f54d856d70b80009426fc7f4ce34fe4304e2c58ebf465031de0","src/crypto.rs":"a1279719ade9704be3d9af55ff679abbe918d525f332ca15810146d45e9080cf","src/dh.rs":"280fd508756b8013368a4233465f681a1339ad4e415569c14762e5dad0441cbe","src/dsa.rs":"ae79baf231681900ea76304285b3ffacf5298c90b8c04d371269cf4adbb5b9fa","src/dtls1.rs":"45e1dbf94a42d587fd948d553dc30187aa6aa2b5b82d554cf725ff36df768aa0","src/ec.rs":"c215a564373e8de1da63b698fbafc187d738fe90b77f998713a91180e178e350","src/err.rs":"3edf1379b3277df32e047a52553d243d4a4001111a277cf4b12f7297f2fe2bf0","src/evp.rs":"e82deaaf6d76c3dc52fd574fa131ac4f64dc6c5f173cf38dfd0a24b2f878c5be","src/hmac.rs":"fa3976d94a1383f300bdec228270afb8b47c97bb019d727c7d59ba783be3c42e","src/lib.rs":"57291110117331f5d6733da1421267e47cf891e0e0411b0720a04fdbc0686700","src/macros.rs":"7ed99c00c53ee12ea92634d4ace0af84845ebf98819869746e7896c8eaff23db","src/obj_mac.rs":"42019b142e523d7695d8c14ee7f72fa4b5702c07dee98fa12e70ab7dfcc95459","src/object.rs":"210d91fc81414da4cd3afa0127cabffef1640fa85e65635bc489e0f721ee929f","src/ocsp.rs":"154e416aa14df8d5aa962f3352ca72bab00716f0834413c78dfa663e0880e9dd","src/ossl_typ.rs":"4379b8327a1efbae1c784ad576c98ac7708bf62cab1c373845d9ca948b5e401b","src/pem.rs":"ba80937125618cd0e7073d69be6aff3b619ede74e227a158cb0a68af27f69640","src/pkcs12.rs":"f1a3f32f128fa8ce94391c1957a0e535387cebc0e25d21743888b172518dd636","src/pkcs7.rs":"0c5a0f85323a1e5a4d7edcc433166de8614b44f545758d926cf95e9626d4af2b","src/rand.rs":"469601b4fbb56d4dbf5cf5d7bb8483e3bde411edea18601e7d1ed6ef27180fd3","src/rsa.rs":"aa984781f19d3e88527bec9db5338b19051313b01589018c5bb86923f058c6c6","src/safestack.rs":"6c39e28565d34efad707d77561d4caa99e3f028fcac3a2ef6fd403a78de1190c","src/sha.rs":"1a6b028a63654d2419417a9a8af790cd22409a4643682a0686ecdb9441264eba","src/srtp.rs":"1c4dee9e6c139cc70416207786e385f199321624fb9fbf3cbf39a8160c0c405d","src/ssl.rs":"5970b21a47668f7efb8130f22110d9ab65c571a45681c02d8ab596b7068db963","src/ssl3.rs":"9336c816e00847d552dea22587d4ac72ff3cbd469fa5ff750423a19ea11e68eb","src/stack.rs":"1a509907283e5a2bf88cf193ce607f49ce7d2d95547c2ce2abc0fd4567aad334","src/tls1.rs":"60ca3dea1bbfda645bde563b4a878dac129c3f760e3ad572381000fc7a8ef522","src/x509.rs":"7ffbf8687f650dd9678eab61871913579539f78ebf69f005f07f7a40017b26cb","src/x509_vfy.rs":"a5fc69e3ef3565c8d9196768c0b84bd876edfb019688dc4487dbb88f6a89293d","src/x509v3.rs":"520253195097d134e553c6378c1db2510eae6ccfcab6f6fb08919697bc0f023b"},"package":"313752393519e876837e09e1fa183ddef0be7735868dced3196f4472d536277f"}
diff --git a/vendor/openssl-sys/build/main.rs b/vendor/openssl-sys/build/main.rs
index df03e01f6..1d813f7d5 100644
--- a/vendor/openssl-sys/build/main.rs
+++ b/vendor/openssl-sys/build/main.rs
@@ -232,6 +232,7 @@ See rust-openssl README for more information:
             (3, 2, _) => ('3', '2', 'x'),
             (3, 3, 0) => ('3', '3', '0'),
             (3, 3, 1) => ('3', '3', '1'),
+            (3, 3, _) => ('3', '3', 'x'),
             _ => version_error(),
         };
 
@@ -272,7 +273,7 @@ fn version_error() -> ! {
         "
 
 This crate is only compatible with OpenSSL 1.0.1 through 1.1.1, or LibreSSL 2.5
-through 3.3.1, but a different version of OpenSSL was found. The build is now aborting
+through 3.3.x, but a different version of OpenSSL was found. The build is now aborting
 due to this version mismatch.
 
 "
-- 
2.31.1

